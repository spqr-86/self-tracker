<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="NEXUS OS - Personal Life Operating System">
  <title>NEXUS OS - Life Operating System</title>
  <link rel="stylesheet" href="css/nexus-theme.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>

  <!-- HEADER -->
  <header>
    <div class="header-top">
      <div class="header-branding">
        <h1>NEXUS OS</h1>
        <p style="font-size: 12px; color: var(--nexus-green-dim); margin-top: 8px; letter-spacing: 2px;">
          –ü–ï–†–°–û–ù–ê–õ–¨–ù–ê–Ø –û–ü–ï–†–ê–¶–ò–û–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –ñ–ò–ó–ù–ò v2.2.0
        </p>
      </div>
      <div class="header-controls">
        <!-- Mode Indicator -->
        <button onclick="showModeModal()" id="mode-indicator" class="mode-indicator" title="–¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º">
          <span id="mode-icon">‚ñì</span>
          <span id="mode-label">–ù–û–†–ú–ê</span>
        </button>
        <button onclick="toggleTheme()" id="theme-toggle" class="icon-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
          <span id="theme-icon">üåô</span>
        </button>
        <button onclick="toggleMenu()" id="menu-toggle" class="icon-btn hamburger" title="–ú–µ–Ω—é">
          <span></span>
          <span></span>
          <span></span>
        </button>
      </div>
    </div>

    <nav id="main-nav" class="nav-closed">
      <button onclick="showSection('dashboard', event)" class="active">–î–∞—à–±–æ—Ä–¥</button>
      <button onclick="showSection('workout-program', event)">–ü—Ä–æ–≥—Ä–∞–º–º–∞</button>
      <button onclick="showSection('workouts', event)">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</button>
      <button onclick="showSection('meditation', event)">–ú–µ–¥–∏—Ç–∞—Ü–∏—è</button>
      <button onclick="showSection('coding', event)">–ö–æ–¥–∏–Ω–≥</button>
      <button onclick="showSection('goals', event)">–¶–µ–ª–∏</button>
      <button onclick="showSection('weight', event)">–í–µ—Å</button>
      <button onclick="showSection('psych-test', event)">–¢–µ—Å—Ç</button>
      <button onclick="showSection('codex', event)">–ö–æ–¥–µ–∫—Å</button>
      <button onclick="showSection('perks', event)">–ü–µ—Ä–∫–∏</button>
    </nav>
  </header>

  <!-- ========== DASHBOARD SECTION ========== -->
  <section id="dashboard" class="section">
    <h2>–û–ë–ó–û–† –°–ò–°–¢–ï–ú–´</h2>

    <!-- BENTO GRID -->
    <div class="bento-grid">

      <!-- MODE WIDGET (Wide) - Replaces old stats -->
      <div class="bento-item bento-wide" data-module="[MODE_SYS_01]" id="mode-widget">
        <!-- Content rendered by JS based on current mode -->
        <div id="mode-widget-content">
          <!-- Placeholder - will be filled by renderModeWidget() -->
        </div>
      </div>

      <!-- WEIGHT TRACKER WIDGET -->
      <div class="bento-item" data-module="[BODY_MON_01]">
        <h3>–ú–û–ù–ò–¢–û–† –í–ï–°–ê</h3>
        <div style="text-align: center; padding: 20px;">
          <div style="font-size: 3rem; font-weight: bold; text-shadow: var(--nexus-glow-strong);" id="current-weight">
            --
          </div>
          <div style="font-size: 12px; color: var(--nexus-green-dim); margin-top: 8px;">
            –¢–ï–ö–£–©–ê–Ø –ú–ê–°–°–ê (–ö–ì)
          </div>
          <div style="margin-top: 16px; font-size: 14px;" id="weight-change">
            –ò–ó–ú–ï–ù–ï–ù–ò–ï: --
          </div>
          <button onclick="showSection('weight', event)" style="margin-top: 16px; width: 100%;">
            –î–û–ë–ê–í–ò–¢–¨ –í–ï–°
          </button>
        </div>
      </div>

      <!-- ACTIVITY SUMMARY -->
      <div class="bento-item" data-module="[ACT_LOG_01]">
        <h3>–ñ–£–†–ù–ê–õ –ê–ö–¢–ò–í–ù–û–°–¢–ò</h3>
        <div style="padding: 10px 0;">
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--nexus-green-dark);">
            <span style="color: var(--nexus-green-dim);">–¢–†–ï–ù–ò–†–û–í–ö–ò:</span>
            <span id="workout-count" style="font-weight: bold;">0</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--nexus-green-dark);">
            <span style="color: var(--nexus-green-dim);">–ú–ï–î–ò–¢–ê–¶–ò–ò:</span>
            <span id="meditation-count" style="font-weight: bold;">0</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid var(--nexus-green-dark);">
            <span style="color: var(--nexus-green-dim);">–°–ï–°–°–ò–ò –ö–û–î–ê:</span>
            <span id="code-count" style="font-weight: bold;">0</span>
          </div>
          <div style="display: flex; justify-content: space-between; padding: 12px 0;">
            <span style="color: var(--nexus-green-dim);">–ê–ö–¢–ò–í–ù–´–ï –¶–ï–õ–ò:</span>
            <span id="goals-count" style="font-weight: bold;">0</span>
          </div>
        </div>
      </div>

      <!-- –¶–ï–õ–¨S WIDGET -->
      <div class="bento-item" data-module="[–¶–ï–õ–¨_TRK_01]">
        <h3>–ê–ö–¢–ò–í–ù–´–ï –ú–ò–°–°–ò–ò</h3>
        <ul id="dashboard-goals" style="max-height: 200px; overflow-y: auto;">
          <li class="list-item" style="font-size: 12px; padding: 8px; color: var(--nexus-green-dim);">
            –ù–ï–¢ –ê–ö–¢–ò–í–ù–´–• –ú–ò–°–°–ò–ô
          </li>
        </ul>
        <button onclick="showSection('goals', event)" style="margin-top: 12px; width: 100%;">
          –£–ü–†–ê–í–õ–ï–ù–ò–ï –¶–ï–õ–Ø–ú–ò
        </button>
      </div>

      <!-- PROGRAM WIDGET (Wide) -->
      <div class="bento-item bento-wide" data-module="[PROG_DAY_01]">
        <h3>–ü–†–û–ì–†–ê–ú–ú–ê –ù–ê –°–ï–ì–û–î–ù–Ø</h3>
        <div id="dashboard-program">
          <p style="font-size: 12px; color: var(--nexus-green-dim); text-align: center; padding: 20px;">
            –ù–ê –°–ï–ì–û–î–ù–Ø –ù–ï–¢ –£–ü–†–ê–ñ–ù–ï–ù–ò–ô
          </p>
        </div>
        <button onclick="showSection('workout-program', event)" style="margin-top: 12px; width: 100%;">
          –ü–û–õ–ù–ê–Ø –ü–†–û–ì–†–ê–ú–ú–ê
        </button>
      </div>

      <!-- PERSONAL CODE WIDGET (Normal) -->
      <div class="bento-item" data-module="[PERK_SYS_01]">
        <h3>–ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –ö–û–î–ï–ö–°</h3>
        <div style="margin: 16px 0;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <span style="font-size: 11px; color: var(--nexus-text-dim);">–†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù–û</span>
            <span style="font-size: 20px; font-weight: 700; color: var(--nexus-amber);" id="dashboard-perks-count">0 / 16</span>
          </div>
          <div style="margin-bottom: 12px;">
            <div style="font-size: 11px; color: var(--nexus-text-dim); margin-bottom: 4px;">–î–û–°–¢–£–ü–ù–û</div>
            <div style="font-size: 16px; color: var(--nexus-green); font-weight: 700;" id="dashboard-perks-available">0</div>
          </div>
          <div id="dashboard-active-perks" style="margin-top: 16px; display: flex; flex-wrap: wrap; gap: 8px;">
            <p style="font-size: 11px; color: var(--nexus-green-dim); text-align: center; padding: 16px 0;">
              –ù–ï–¢ –ê–ö–¢–ò–í–ù–´–• –ü–ï–†–ö–û–í
            </p>
          </div>
        </div>
        <button onclick="showSection('perks', event)" style="margin-top: 12px; width: 100%;">
          –î–ï–†–ï–í–û –ü–ï–†–ö–û–í
        </button>
      </div>

      <!-- DATA MANAGEMENT WIDGET -->
      <div class="bento-item" data-module="[DATA_CTRL_01]">
        <h3>–£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò</h3>
        <div style="padding: 16px 0;">
          <p style="font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 16px; line-height: 1.6;">
            –≠–∫—Å–ø–æ—Ä—Ç –∏ –∏–º–ø–æ—Ä—Ç –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON
          </p>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <button onclick="exportData()" style="width: 100%; background: var(--nexus-green); color: var(--nexus-black);">
              üì§ –≠–ö–°–ü–û–†–¢ –î–ê–ù–ù–´–•
            </button>
            <button onclick="importData()" style="width: 100%; background: var(--nexus-amber); color: var(--nexus-black);">
              üì• –ò–ú–ü–û–†–¢ –î–ê–ù–ù–´–•
            </button>
          </div>
          <div style="margin-top: 16px; padding: 12px; background: var(--nexus-black); border-left: 3px solid var(--nexus-green); font-size: 11px; line-height: 1.6; color: var(--nexus-text-dim);">
            <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –ò–º–ø–æ—Ä—Ç –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é —á–µ—Ä–µ–∑ —ç–∫—Å–ø–æ—Ä—Ç.
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- ========== WORKOUT PROGRAM SECTION ========== -->
  <section id="workout-program" class="section" style="display:none" aria-labelledby="program-heading">
    <h2 id="program-heading">–ü–†–û–ì–†–ê–ú–ú–ê –¢–†–ï–ù–ò–†–û–í–û–ö</h2>

    <div class="card">
      <h3>–í–¢–û–†–ù–ò–ö</h3>
      <ul id="programTuesday" aria-live="polite"></ul>
    </div>

    <div class="card">
      <h3>–ß–ï–¢–í–ï–†–ì</h3>
      <ul id="programThursday" aria-live="polite"></ul>
    </div>

    <div class="card">
      <h3>–°–£–ë–ë–û–¢–ê</h3>
      <ul id="programSaturday" aria-live="polite"></ul>
    </div>

    <div class="card">
      <h3>–î–û–ë–ê–í–ò–¢–¨ –£–ü–†–ê–ñ–ù–ï–ù–ò–ï</h3>
      <form id="programForm" onsubmit="event.preventDefault(); addProgramExercise();">
        <label for="pDay">–î–ï–ù–¨ –ù–ï–î–ï–õ–ò</label>
        <select id="pDay" required aria-required="true">
          <option value="–í—Ç–æ—Ä–Ω–∏–∫">–í–¢–û–†–ù–ò–ö</option>
          <option value="–ß–µ—Ç–≤–µ—Ä–≥">–ß–ï–¢–í–ï–†–ì</option>
          <option value="–°—É–±–±–æ—Ç–∞">–°–£–ë–ë–û–¢–ê</option>
        </select>

        <label for="pExercise">–£–ü–†–ê–ñ–ù–ï–ù–ò–ï</label>
        <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ñ–∏–º –ª—ë–∂–∞" id="pExercise" required aria-required="true">

        <label for="pSets">–ü–û–î–•–û–î–´</label>
        <input type="number" placeholder="3" id="pSets" min="1" required aria-required="true">

        <label for="pReps">–ü–û–í–¢–û–†–ï–ù–ò–Ø</label>
        <input type="number" placeholder="10" id="pReps" min="1" required aria-required="true">

        <label for="pWeight">–í–ï–° (–ö–ì)</label>
        <input type="number" placeholder="50" id="pWeight" min="0" step="0.5" required aria-required="true">

        <label for="pVideo">–°–°–´–õ–ö–ê YOUTUBE</label>
        <input type="url" placeholder="https://youtube.com/watch?v=..." id="pVideo">

        <button type="submit">–î–û–ë–ê–í–ò–¢–¨</button>
      </form>
    </div>
  </section>

  <!-- ========== WORKOUTS SECTION ========== -->
  <section id="workouts" class="section" style="display:none" aria-labelledby="workout-heading">
    <h2 id="workout-heading">–ñ–£–†–ù–ê–õ –¢–†–ï–ù–ò–†–û–í–û–ö</h2>

    <div class="card">
      <canvas id="workoutChart" aria-label="Workout progress chart"></canvas>
    </div>

    <div class="card">
      <h3>–î–û–ë–ê–í–ò–¢–¨ –¢–†–ï–ù–ò–†–û–í–ö–£</h3>
      <form id="workoutForm" onsubmit="event.preventDefault(); addWorkout();">
        <label for="wDate">–î–ê–¢–ê</label>
        <input type="date" id="wDate" required aria-required="true">

        <label for="wExercise">–£–ü–†–ê–ñ–ù–ï–ù–ò–ï</label>
        <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ñ–∏–º –ª—ë–∂–∞" id="wExercise" required aria-required="true">

        <label for="wSets">–ü–û–î–•–û–î–´</label>
        <input type="number" placeholder="3" id="wSets" min="0">

        <label for="wReps">–ü–û–í–¢–û–†–ï–ù–ò–Ø</label>
        <input type="number" placeholder="10" id="wReps" min="0">

        <label for="wWeight">–í–ï–° (–ö–ì)</label>
        <input type="number" placeholder="50" id="wWeight" min="0" step="0.5">

        <button type="submit">–°–û–•–†–ê–ù–ò–¢–¨</button>
      </form>
    </div>

    <div class="card">
      <h3>–ò–°–¢–û–†–ò–Ø –¢–†–ï–ù–ò–†–û–í–û–ö</h3>
      <ul id="workoutList" aria-live="polite"></ul>
    </div>
  </section>

  <!-- ========== MEDITATION SECTION ========== -->
  <section id="meditation" class="section" style="display:none" aria-labelledby="meditation-heading">
    <h2 id="meditation-heading">–ú–û–î–£–õ–¨ –ú–ï–î–ò–¢–ê–¶–ò–ò</h2>

    <div class="card">
      <canvas id="meditationChart" aria-label="Meditation progress chart"></canvas>
    </div>

    <div class="card">
      <h3>–î–û–ë–ê–í–ò–¢–¨ –ú–ï–î–ò–¢–ê–¶–ò–Æ</h3>
      <form id="meditationForm" onsubmit="event.preventDefault(); addMeditation();">
        <label for="mDate">–î–ê–¢–ê</label>
        <input type="date" id="mDate" required aria-required="true">

        <label for="mDuration">–î–õ–ò–¢–ï–õ–¨–ù–û–°–¢–¨ (–ú–ò–ù)</label>
        <input type="number" placeholder="10" id="mDuration" min="1" required aria-required="true">

        <label for="mNote">–ó–ê–ú–ï–¢–ö–ò</label>
        <textarea id="mNote" placeholder="–ö–∞–∫ –≤—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª–∏?" rows="3"></textarea>

        <button type="submit">–°–û–•–†–ê–ù–ò–¢–¨</button>
      </form>
    </div>

    <div class="card">
      <h3>–ñ–£–†–ù–ê–õ –ú–ï–î–ò–¢–ê–¶–ò–ô</h3>
      <ul id="meditationList" aria-live="polite"></ul>
    </div>
  </section>

  <!-- ========== CODING SECTION ========== -->
  <section id="coding" class="section" style="display:none" aria-labelledby="coding-heading">
    <h2 id="coding-heading">–¢–†–ï–ù–ò–†–û–í–ö–ê –ò–ù–¢–ï–õ–õ–ï–ö–¢–ê</h2>

    <div class="card">
      <canvas id="codingChart" aria-label="Coding progress chart"></canvas>
    </div>

    <div class="card">
      <h3>–î–û–ë–ê–í–ò–¢–¨ –°–ï–°–°–ò–Æ</h3>
      <form id="codeForm" onsubmit="event.preventDefault(); addCodeSession();">
        <label for="cDate">–î–ê–¢–ê</label>
        <input type="date" id="cDate" required aria-required="true">

        <label for="cHours">–ß–ê–°–´</label>
        <input type="number" placeholder="2" id="cHours" min="0.5" step="0.5" required aria-required="true">

        <label for="cProject">–ü–†–û–ï–ö–¢</label>
        <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –õ–∏—á–Ω—ã–π —Å–∞–π—Ç" id="cProject" required aria-required="true">

        <label for="cTech">–¢–ï–•–ù–û–õ–û–ì–ò–ò</label>
        <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: React, Node.js" id="cTech">

        <button type="submit">–°–û–•–†–ê–ù–ò–¢–¨</button>
      </form>
    </div>

    <div class="card">
      <h3>–ñ–£–†–ù–ê–õ –ö–û–î–ê</h3>
      <ul id="codeList" aria-live="polite"></ul>
    </div>
  </section>

  <!-- ========== –¶–ï–õ–¨S SECTION ========== -->
  <section id="goals" class="section" style="display:none" aria-labelledby="goals-heading">
    <h2 id="goals-heading">–¶–ï–õ–ò –ò –ú–ò–°–°–ò–ò</h2>

    <div class="card">
      <h3>–ù–û–í–ê–Ø –¶–ï–õ–¨</h3>
      <form id="goalForm" onsubmit="event.preventDefault(); addGoal();">
        <label for="gGoal">–¶–ï–õ–¨</label>
        <input type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°–±—Ä–æ—Å–∏—Ç—å 10–∫–≥" id="gGoal" required aria-required="true">

        <label for="gDeadline">TARGET –î–ê–¢–ê</label>
        <input type="date" id="gDeadline" required aria-required="true">

        <button type="submit">ADD –¶–ï–õ–¨</button>
      </form>
    </div>

    <div class="card">
      <h3>ACTIVE –¶–ï–õ–¨S</h3>
      <ul id="goalList" aria-live="polite"></ul>
    </div>

    <div class="card">
      <h3>–î–û–°–¢–ò–ñ–ï–ù–ò–Ø</h3>
      <ul id="achievementList" aria-live="polite"></ul>
    </div>
  </section>

  <!-- ========== WEIGHT TRACKER SECTION ========== -->
  <section id="weight" class="section" style="display:none;">
    <h2>[WEIGHT_SYS] –ú–û–ù–ò–¢–û–†–ò–ù–ì –í–ï–°–ê</h2>

    <div class="weight-container">
      <!-- Stats Cards -->
      <div class="weight-stats-grid">
        <!-- Current Weight -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">–¢–ï–ö–£–©–ò–ô –í–ï–°</div>
          <div class="weight-stat-value" id="currentWeight">--</div>
          <div class="weight-stat-unit">–∫–≥</div>
        </div>

        <!-- Starting Weight -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">–ù–ê–ß–ê–õ–¨–ù–´–ô</div>
          <div class="weight-stat-value" id="startingWeight">--</div>
          <div class="weight-stat-unit">–∫–≥</div>
        </div>

        <!-- Goal Weight -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">–¶–ï–õ–¨</div>
          <div class="weight-stat-value" id="goalWeight">--</div>
          <div class="weight-stat-unit">–∫–≥</div>
        </div>

        <!-- Change -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">–ò–ó–ú–ï–ù–ï–ù–ò–ï</div>
          <div class="weight-stat-value" id="weightChange" style="font-size: 32px;">--</div>
          <div class="weight-stat-unit">–∫–≥</div>
        </div>

        <!-- Current Body Fat -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">% –ñ–ò–†–ê</div>
          <div class="weight-stat-value" id="currentBodyFat">--</div>
          <div class="weight-stat-unit">%</div>
        </div>

        <!-- Starting Body Fat -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">% –ñ–ò–†–ê –ù–ê–ß–ê–õ–¨–ù–´–ô</div>
          <div class="weight-stat-value" id="startingBodyFat" style="font-size: 28px;">--</div>
          <div class="weight-stat-unit">%</div>
        </div>

        <!-- Body Fat Change -->
        <div class="weight-stat-card">
          <div class="weight-stat-label">–ò–ó–ú–ï–ù–ï–ù–ò–ï % –ñ–ò–†–ê</div>
          <div class="weight-stat-value" id="bodyFatChange" style="font-size: 28px;">--</div>
          <div class="weight-stat-unit">%</div>
        </div>
      </div>

      <!-- Add Weight Form -->
      <div class="card" style="margin-top: 24px;">
        <h3>–î–æ–±–∞–≤–∏—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–µ</h3>
        <form id="weightForm" style="display: flex; gap: 16px; align-items: end; flex-wrap: wrap; margin-top: 16px;">
          <div style="flex: 1; min-width: 150px;">
            <label style="display: block; font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 8px;">
              –î–ê–¢–ê
            </label>
            <input type="date" id="weightDate" required style="
              width: 100%;
              background: var(--nexus-surface);
              border: 1px solid var(--nexus-border);
              border-radius: var(--radius-sm);
              padding: 10px 12px;
              color: var(--nexus-text);
              font-family: var(--font-mono);
              font-size: 13px;
            ">
          </div>

          <div style="flex: 1; min-width: 150px;">
            <label style="display: block; font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 8px;">
              –í–ï–° (–ö–ì)
            </label>
            <input type="number" step="0.1" id="weightValue" placeholder="70.5" required style="
              width: 100%;
              background: var(--nexus-surface);
              border: 1px solid var(--nexus-border);
              border-radius: var(--radius-sm);
              padding: 10px 12px;
              color: var(--nexus-text);
              font-family: var(--font-mono);
              font-size: 13px;
            ">
          </div>

          <div style="flex: 1; min-width: 150px;">
            <label style="display: block; font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 8px;">
              % –ñ–ò–†–ê (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            </label>
            <input type="number" step="0.1" id="bodyFatValue" placeholder="18.5" style="
              width: 100%;
              background: var(--nexus-surface);
              border: 1px solid var(--nexus-border);
              border-radius: var(--radius-sm);
              padding: 10px 12px;
              color: var(--nexus-text);
              font-family: var(--font-mono);
              font-size: 13px;
            ">
          </div>

          <div style="flex: 1; min-width: 200px;">
            <label style="display: block; font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 8px;">
              –ó–ê–ú–ï–¢–ö–ê (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
            </label>
            <input type="text" id="weightNote" placeholder="–ü–æ—Å–ª–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏" style="
              width: 100%;
              background: var(--nexus-surface);
              border: 1px solid var(--nexus-border);
              border-radius: var(--radius-sm);
              padding: 10px 12px;
              color: var(--nexus-text);
              font-family: var(--font-mono);
              font-size: 13px;
            ">
          </div>

          <button type="button" onclick="addWeight()" style="flex: 0 0 auto;">
            üìä –î–û–ë–ê–í–ò–¢–¨
          </button>
        </form>
      </div>

      <!-- Goal Setting -->
      <div class="card" style="margin-top: 24px;">
        <h3>–¶–µ–ª–µ–≤–æ–π –≤–µ—Å</h3>
        <div style="display: flex; gap: 16px; align-items: end; margin-top: 16px;">
          <div style="flex: 1;">
            <label style="display: block; font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 8px;">
              –¶–ï–õ–¨ (–ö–ì)
            </label>
            <input type="number" step="0.1" id="goalWeightInput" placeholder="65.0" style="
              width: 100%;
              background: var(--nexus-surface);
              border: 1px solid var(--nexus-border);
              border-radius: var(--radius-sm);
              padding: 10px 12px;
              color: var(--nexus-text);
              font-family: var(--font-mono);
              font-size: 13px;
            ">
          </div>
          <button type="button" onclick="setWeightGoal()" style="flex: 0 0 auto;">
            üéØ –£–°–¢–ê–ù–û–í–ò–¢–¨ –¶–ï–õ–¨
          </button>
        </div>

        <div id="goalProgress" style="margin-top: 16px; display: none;">
          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <span style="font-size: 12px; color: var(--nexus-text-dim);">–ü–†–û–ì–†–ï–°–° –ö –¶–ï–õ–ò</span>
            <span style="font-size: 14px; color: var(--nexus-green); font-weight: 700;" id="goalProgressPercent">0%</span>
          </div>
          <div style="background: var(--nexus-surface); height: 20px; border-radius: 10px; overflow: hidden; border: 1px solid var(--nexus-border);">
            <div id="goalProgressBar" style="height: 100%; background: var(--nexus-green); width: 0%; transition: width 0.5s;"></div>
          </div>
          <div style="font-size: 11px; color: var(--nexus-text-dim); margin-top: 8px;" id="goalProgressText"></div>
        </div>
      </div>

      <!-- Chart -->
      <div class="card" style="margin-top: 24px;">
        <h3>–ì—Ä–∞—Ñ–∏–∫ –≤–µ—Å–∞</h3>
        <div id="weightChart" style="margin-top: 16px; min-height: 300px;">
          <!-- Chart will be rendered here -->
        </div>
      </div>

      <!-- History -->
      <div class="card" style="margin-top: 24px;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h3>–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ—Ä–µ–Ω–∏–π</h3>
          <button onclick="clearWeightHistory()" style="padding: 6px 12px; font-size: 11px; background: var(--nexus-surface); border: 1px solid var(--nexus-border);">
            üóëÔ∏è –û–ß–ò–°–¢–ò–¢–¨
          </button>
        </div>
        <div id="weightHistory">
          <!-- History will be rendered here -->
        </div>
      </div>
    </div>
  </section>

  <!-- ========== PSYCHOLOGICAL TEST SECTION ========== -->
  <section id="psych-test" class="section" style="display:none" aria-labelledby="test-heading">
    <h2 id="test-heading">–¢–ï–°–¢ –î–ï–ü–†–ï–°–°–ò–Ø</h2>

    <div class="card">
      <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 24px;">
        <div>
          <h3>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –¥–µ–ø—Ä–µ—Å—Å–∏–∏</h3>
          <p style="color: var(--nexus-green-dim); font-size: 12px; margin-top: 8px;">
            –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–≤–Ω—è –¥–µ–ø—Ä–µ—Å—Å–∏–∏. 15 –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –≤–∞—à–µ–º —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.
          </p>
        </div>
        <button onclick="showPHQ15History()" style="padding: 8px 16px; font-size: 11px;">
          üìä –ò–°–¢–û–†–ò–Ø
        </button>
      </div>

      <p style="color: var(--nexus-text-dim); font-size: 13px; margin-bottom: 24px; line-height: 1.6;">
        –ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–ª–∏ —Å–ª–µ–¥—É—é—â–∏–µ —Å–∏–º–ø—Ç–æ–º—ã <strong>–≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 2 –Ω–µ–¥–µ–ª—å</strong>?
      </p>

      <form id="phq15Form">
        <!-- Question 1 -->
        <div class="test-question">
          <label class="test-question-label">1. –ì—Ä—É—Å—Ç—å: –≤–∞–º –≥—Ä—É—Å—Ç–Ω–æ –∏–ª–∏ –≤—ã –≤ –ø–ª–æ—Ö–æ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–∏?</label>
          <div class="test-options">
            <label><input type="radio" name="q1" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q1" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q1" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q1" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 2 -->
        <div class="test-question">
          <label class="test-question-label">2. –£–Ω—ã–Ω–∏–µ: –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —á—É–≤—Å—Ç–≤–æ –±–µ–∑–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏?</label>
          <div class="test-options">
            <label><input type="radio" name="q2" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q2" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q2" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q2" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 3 -->
        <div class="test-question">
          <label class="test-question-label">3. –ù–∏–∑–∫–∞—è —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞: –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —á—É–≤—Å—Ç–≤–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –Ω–∏—á—Ç–æ–∂–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–ø—Ä–∏–≥–æ–¥–Ω–æ—Å—Ç–∏?</label>
          <div class="test-options">
            <label><input type="radio" name="q3" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q3" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q3" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q3" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 4 -->
        <div class="test-question">
          <label class="test-question-label">4. –ù–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç—å: –≤—ã –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ –≤—ã —Ö—É–∂–µ –¥—Ä—É–≥–∏—Ö?</label>
          <div class="test-options">
            <label><input type="radio" name="q4" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q4" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q4" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q4" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 5 -->
        <div class="test-question">
          <label class="test-question-label">5. –í–∏–Ω–∞: –≤—ã –∫—Ä–∏—Ç–∏–∫—É–µ—Ç–µ –∏ –æ–±–≤–∏–Ω—è–µ—Ç–µ —Å–∞–º–æ–≥–æ —Å–µ–±—è?</label>
          <div class="test-options">
            <label><input type="radio" name="q5" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q5" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q5" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q5" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 6 -->
        <div class="test-question">
          <label class="test-question-label">6. –ù–µ—Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏ —Å –ø—Ä–∏–Ω—è—Ç–∏–µ–º —Ä–µ—à–µ–Ω–∏–π?</label>
          <div class="test-options">
            <label><input type="radio" name="q6" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q6" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q6" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q6" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 7 -->
        <div class="test-question">
          <label class="test-question-label">7. –†–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–ª–∏ –¥–æ—Å–∞–¥—É –∏–ª–∏ –∑–ª–æ—Å—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–æ–ª–≥–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏?</label>
          <div class="test-options">
            <label><input type="radio" name="q7" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q7" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q7" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q7" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 8 -->
        <div class="test-question">
          <label class="test-question-label">8. –ü–æ—Ç–µ—Ä—è –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –∂–∏–∑–Ω–∏: –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –ø–æ—Ç–µ—Ä—é –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —Å–≤–æ–µ–π –∫–∞—Ä—å–µ—Ä–µ, —É–≤–ª–µ—á–µ–Ω–∏—è–º, —á–ª–µ–Ω–∞–º —Å–µ–º—å–∏ –∏ –¥—Ä—É–∑—å—è–º?</label>
          <div class="test-options">
            <label><input type="radio" name="q8" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q8" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q8" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q8" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 9 -->
        <div class="test-question">
          <label class="test-question-label">9. –ü–æ—Ç–µ—Ä—è –º–æ—Ç–∏–≤–∞—Ü–∏–∏: –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∑–∞—Å—Ç–∞–≤–ª—è—Ç—å —Å–µ–±—è –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –¥–µ–ª–∞–º–∏?</label>
          <div class="test-options">
            <label><input type="radio" name="q9" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q9" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q9" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q9" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 10 -->
        <div class="test-question">
          <label class="test-question-label">10. –°–∞–º–æ–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ: –≤–∞–º –∫–∞–∂–µ—Ç—Å—è, —á—Ç–æ –≤—ã –ø–æ—Å—Ç–∞—Ä–µ–ª–∏ –∏–ª–∏ –≤—ã–≥–ª—è–¥–∏—Ç–µ –Ω–µ–ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ?</label>
          <div class="test-options">
            <label><input type="radio" name="q10" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q10" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q10" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q10" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 11 -->
        <div class="test-question">
          <label class="test-question-label">11. –ò–∑–º–µ–Ω–µ–Ω–∏—è –∞–ø–ø–µ—Ç–∏—Ç–∞: –≤—ã –∏–º–µ–µ—Ç–µ —Å–Ω–∏–∂–µ–Ω–Ω—ã–π –∏–ª–∏, –Ω–∞–æ–±–æ—Ä–æ—Ç, –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π –∞–ø–ø–µ—Ç–∏—Ç (–∏–ª–∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç–µ –∞–ª–∫–æ–≥–æ–ª–µ–º)?</label>
          <div class="test-options">
            <label><input type="radio" name="q11" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q11" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q11" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q11" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 12 -->
        <div class="test-question">
          <label class="test-question-label">12. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ —Å–Ω–∞: –≤—ã –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç–µ –∑–∞—Ç—Ä—É–¥–Ω–µ–Ω–∏—è —Å–æ —Å–Ω–æ–º –∏–ª–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫—Ä–∞–π–Ω–µ —É—Ç–æ–º–ª–µ–Ω—ã –∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–ø–∏—Ç–µ?</label>
          <div class="test-options">
            <label><input type="radio" name="q12" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q12" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q12" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q12" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 13 -->
        <div class="test-question">
          <label class="test-question-label">13. –ü–æ—Ç–µ—Ä—è –ª–∏–±–∏–¥–æ: –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –ø–æ—Ç–µ—Ä—é –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ —Å–µ–∫—Å—É</label>
          <div class="test-options">
            <label><input type="radio" name="q13" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q13" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q13" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q13" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 14 -->
        <div class="test-question">
          <label class="test-question-label">14. –û–∑–∞–±–æ—á–µ–Ω–Ω–æ—Å—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º: –≤—ã –±–µ—Å–ø–æ–∫–æ–∏—Ç–µ—Å—å –ø–æ –ø–æ–≤–æ–¥—É —Å–≤–æ–µ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è?</label>
          <div class="test-options">
            <label><input type="radio" name="q14" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q14" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q14" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q14" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <!-- Question 15 -->
        <div class="test-question">
          <label class="test-question-label">15. –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏ –∏–ª–∏ –Ω–∞–º–µ—Ä–µ–Ω–∏—è: –≤–∞—Å –ø–æ—Å–µ—â–∞—é—Ç –º—ã—Å–ª–∏, —á—Ç–æ –∂–∏–∑–Ω—å –Ω–µ —Å—Ç–æ–∏—Ç —Ç–æ–≥–æ –∏ —á—Ç–æ –ª—É—á—à–µ —É–º–µ—Ä–µ—Ç—å?</label>
          <div class="test-options">
            <label><input type="radio" name="q15" value="0" required> –ù–∏ —Ä–∞–∑—É</label>
            <label><input type="radio" name="q15" value="1"> –ò–Ω–æ–≥–¥–∞</label>
            <label><input type="radio" name="q15" value="2"> –£–º–µ—Ä–µ–Ω–Ω–æ</label>
            <label><input type="radio" name="q15" value="3"> –ß–∞—Å—Ç–æ</label>
          </div>
        </div>

        <button type="button" onclick="calculatePHQ15()">–†–ê–°–°–ß–ò–¢–ê–¢–¨ –†–ï–ó–£–õ–¨–¢–ê–¢</button>
      </form>

      <!-- Result Display -->
      <div id="phq15Result" style="margin-top: 24px; padding: 24px; border: 2px solid var(--nexus-green); border-radius: var(--radius); display: none;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
          <h3>–†–ï–ó–£–õ–¨–¢–ê–¢ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ò</h3>
          <div style="font-size: 32px; color: var(--nexus-green); font-weight: 700;" id="phq15Score">0</div>
        </div>

        <div id="phq15Interpretation" style="margin-bottom: 16px;"></div>

        <div id="phq15Recommendations" style="background: var(--nexus-surface); padding: 16px; border-radius: var(--radius-sm); margin-top: 16px;"></div>

        <div style="margin-top: 16px; padding-top: 16px; border-top: 1px solid var(--nexus-border); font-size: 11px; color: var(--nexus-text-dim);">
          –†–µ–∑—É–ª—å—Ç–∞—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –∏—Å—Ç–æ—Ä–∏–∏. –î–∞—Ç–∞: <span id="phq15Date"></span>
        </div>
      </div>

      <!-- History Display -->
      <div id="phq15History" style="margin-top: 24px; display: none;">
        <h3 style="margin-bottom: 16px;">–ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–µ–ø—Ä–µ—Å—Å–∏–∏</h3>
        <div id="phq15HistoryContent"></div>
      </div>
    </div>
  </section>

  <!-- ========== CODEX SECTION ========== -->
  <section id="codex" class="section" style="display:none;">
    <div class="pipboy-screen">
      <!-- Pip-Boy Header -->
      <div class="pipboy-header">
        <div class="pipboy-scanlines"></div>
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <div>
            <h2 style="color: #00ff00; font-family: var(--font-mono); font-size: 24px; margin: 0; text-shadow: 0 0 10px #00ff00;">
              –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –ö–û–î–ï–ö–°
            </h2>
            <div style="font-size: 10px; color: #00ff0080; margin-top: 4px; letter-spacing: 2px;">
              [VAULT-TEC PERSONAL CODE SYSTEM v1.0]
            </div>
          </div>
          <div style="text-align: right;">
            <div style="font-size: 11px; color: #00ff0080; margin-bottom: 4px;">STATUS</div>
            <div style="font-size: 20px; color: #00ff00; font-weight: 700; font-family: var(--font-mono);">
              ACTIVE
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content Area -->
      <div class="pipboy-content">
        <div style="display: grid; grid-template-columns: 200px 1fr; gap: 24px; align-items: start;">

          <!-- Character Silhouette -->
          <div class="vault-boy-container">
            <svg viewBox="0 0 200 400" style="width: 100%; height: auto; filter: drop-shadow(0 0 8px #00ff00);">
              <!-- Vault Boy Silhouette in style of Fallout -->
              <g fill="#00ff00" opacity="0.9">
                <!-- Head -->
                <circle cx="100" cy="60" r="35"/>
                <!-- Body -->
                <rect x="75" y="95" width="50" height="80" rx="8"/>
                <!-- Arms -->
                <rect x="40" y="100" width="35" height="15" rx="7" transform="rotate(-20 57 107)"/>
                <rect x="125" y="100" width="35" height="15" rx="7" transform="rotate(20 143 107)"/>
                <!-- Legs -->
                <rect x="75" y="175" width="20" height="90" rx="10"/>
                <rect x="105" y="175" width="20" height="90" rx="10"/>
                <!-- Thumbs up hand (left) -->
                <circle cx="40" cy="115" r="12"/>
                <rect x="35" y="105" width="10" height="15" rx="5"/>
              </g>
              <!-- SPECIAL stats outline -->
              <text x="100" y="310" text-anchor="middle" fill="#00ff00" font-size="12" font-family="monospace" opacity="0.7">S.P.E.C.I.A.L</text>
              <text x="100" y="330" text-anchor="middle" fill="#00ff00" font-size="10" font-family="monospace" opacity="0.5">STRENGTH</text>
              <text x="100" y="345" text-anchor="middle" fill="#00ff00" font-size="10" font-family="monospace" opacity="0.5">PERCEPTION</text>
              <text x="100" y="360" text-anchor="middle" fill="#00ff00" font-size="10" font-family="monospace" opacity="0.5">INTELLIGENCE</text>
              <text x="100" y="375" text-anchor="middle" fill="#00ff00" font-size="10" font-family="monospace" opacity="0.5">WILLPOWER</text>
            </svg>
            <div style="margin-top: 12px; text-align: center; font-size: 11px; color: #00ff0080; font-family: var(--font-mono);">
              VAULT DWELLER
            </div>
          </div>

          <!-- Code Editor Area -->
          <div style="position: relative;">
            <!-- Terminal-style header with controls -->
            <div style="background: #001a00; border: 2px solid #00ff00; border-bottom: none; padding: 8px 16px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px;">
              <span style="color: #00ff00; font-size: 11px; font-family: var(--font-mono);">
                &gt; PERSONAL_CODE.TXT
              </span>
              <div style="display: flex; gap: 8px; align-items: center;">
                <!-- Reading Mode Toggle -->
                <button
                  id="reading-mode-btn"
                  onclick="toggleReadingMode()"
                  style="
                    background: #003300;
                    border: 1px solid #00ff00;
                    color: #00ff00;
                    padding: 4px 12px;
                    font-family: var(--font-mono);
                    font-size: 10px;
                    cursor: pointer;
                    border-radius: 3px;
                    transition: all 0.2s;
                  "
                  title="–£–ª—É—á—à–∏—Ç—å —á–∏—Ç–∞–µ–º–æ—Å—Ç—å"
                >
                  üëÅÔ∏è –ß–¢–ï–ù–ò–ï
                </button>
                <!-- Preview Toggle -->
                <button
                  id="preview-mode-btn"
                  onclick="togglePreviewMode()"
                  style="
                    background: #003300;
                    border: 1px solid #00ff00;
                    color: #00ff00;
                    padding: 4px 12px;
                    font-family: var(--font-mono);
                    font-size: 10px;
                    cursor: pointer;
                    border-radius: 3px;
                    transition: all 0.2s;
                  "
                  title="–ü—Ä–æ—Å–º–æ—Ç—Ä Markdown"
                >
                  üìñ PREVIEW
                </button>
                <span style="color: #00ff0060; font-size: 10px; font-family: var(--font-mono);" id="codex-mode-indicator">
                  EDIT
                </span>
              </div>
            </div>

            <!-- Section Tabs (auto-generated from # headers) -->
            <div id="codex-tabs" class="codex-tabs" style="display: none;">
              <!-- Tabs will be rendered by JS -->
            </div>

            <!-- Text Editor -->
            <textarea
              id="personal-code-text"
              placeholder="> –í–í–ï–î–ò–¢–ï –í–ê–® –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –ö–û–î–ï–ö–°...

–ü–†–ò–ú–ï–† –° MARKDOWN:
----------------------------------------
# –ú–û–ô –ö–û–î–ï–ö–°

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ß–ï–°–¢–ù–û–°–¢–¨** - –ë—ã—Ç—å —á–µ—Å—Ç–Ω—ã–º –ø–µ—Ä–µ–¥ —Å–æ–±–æ–π –∏ –¥—Ä—É–≥–∏–º–∏
2. **–°–õ–û–í–û** - –î–µ—Ä–∂—É –¥–∞–Ω–Ω–æ–µ —Å–ª–æ–≤–æ
3. **–†–û–°–¢** - –†–∞–∑–≤–∏–≤–∞—é—Å—å –∫–∞–∂–¥—ã–π –¥–µ–Ω—å
4. **–ü–û–ú–û–©–¨** - –ü–æ–º–æ–≥–∞—é —Ç–µ–º, –∫—Ç–æ –Ω—É–∂–¥–∞–µ—Ç—Å—è

> &quot;–ù–µ —Å–¥–∞—é—Å—å –ø–µ—Ä–µ–¥ —Ç—Ä—É–¥–Ω–æ—Å—Ç—è–º–∏&quot;

## –û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞

- –£–≤–∞–∂–∞—é —Å–µ–±—è –∏ –¥—Ä—É–≥–∏—Ö
- –ü—Ä–∏–Ω–∏–º–∞—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è
- *–ü–æ—Å—Ç–æ—è–Ω–Ω–æ —É—á—É—Å—å –Ω–æ–≤–æ–º—É*

----------------------------------------"
              style="
                width: 100%;
                min-height: 400px;
                background: #001a00;
                color: #00ff00;
                border: 2px solid #00ff00;
                border-top: none;
                padding: 20px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                line-height: 1.8;
                resize: vertical;
                box-shadow: inset 0 0 30px rgba(0, 255, 0, 0.1);
                text-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
              "
              onchange="savePersonalCodeText()"
            ></textarea>

            <!-- Markdown Preview -->
            <div
              id="personal-code-preview"
              style="
                display: none;
                width: 100%;
                min-height: 400px;
                background: #001a00;
                color: #00ff00;
                border: 2px solid #00ff00;
                border-top: none;
                padding: 20px;
                font-family: 'Courier New', monospace;
                font-size: 14px;
                line-height: 1.8;
                box-shadow: inset 0 0 30px rgba(0, 255, 0, 0.1);
                overflow-y: auto;
              "
            ></div>

            <!-- Terminal-style footer with buttons -->
            <div style="background: #001a00; border: 2px solid #00ff00; border-top: none; padding: 12px 16px; display: flex; gap: 12px;">
              <button
                onclick="savePersonalCodeText()"
                style="
                  flex: 1;
                  background: #003300;
                  border: 2px solid #00ff00;
                  color: #00ff00;
                  padding: 10px 20px;
                  font-family: var(--font-mono);
                  font-size: 12px;
                  cursor: pointer;
                  text-shadow: 0 0 5px #00ff00;
                  transition: all 0.2s;
                "
                onmouseover="this.style.background='#004400'; this.style.boxShadow='0 0 15px rgba(0,255,0,0.5)'"
                onmouseout="this.style.background='#003300'; this.style.boxShadow='none'"
              >
                [F1] –°–û–•–†–ê–ù–ò–¢–¨
              </button>
              <button
                onclick="clearPersonalCodeText()"
                style="
                  background: #1a0000;
                  border: 2px solid #ff0000;
                  color: #ff0000;
                  padding: 10px 20px;
                  font-family: var(--font-mono);
                  font-size: 12px;
                  cursor: pointer;
                  text-shadow: 0 0 5px #ff0000;
                  transition: all 0.2s;
                "
                onmouseover="this.style.background='#330000'; this.style.boxShadow='0 0 15px rgba(255,0,0,0.5)'"
                onmouseout="this.style.background='#1a0000'; this.style.boxShadow='none'"
              >
                [DEL] –û–ß–ò–°–¢–ò–¢–¨
              </button>
            </div>

            <!-- Save status indicator -->
            <div id="code-save-status" style="
              margin-top: 12px;
              padding: 8px 16px;
              font-size: 11px;
              color: #00ff00;
              background: #001a00;
              border: 1px solid #00ff00;
              font-family: var(--font-mono);
              opacity: 0;
              transition: opacity 0.3s;
              text-align: center;
            ">
              ‚úì –ö–û–î–ï–ö–° –°–û–•–†–ê–ù–ï–ù –í –°–ò–°–¢–ï–ú–ï
            </div>
          </div>

        </div>

        <!-- Info Panel -->
        <div style="margin-top: 32px; background: #001a00; border: 2px solid #00ff00; padding: 20px;">
          <div style="color: #00ff00; font-family: var(--font-mono); font-size: 13px; line-height: 1.8;">
            <div style="color: #00ff00cc; margin-bottom: 12px; font-size: 11px; letter-spacing: 1px;">
              [INFO] –ß–¢–û –¢–ê–ö–û–ï –ü–ï–†–°–û–ù–ê–õ–¨–ù–´–ô –ö–û–î–ï–ö–°?
            </div>
            <div style="color: #00ff0099;">
              –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ö–æ–¥–µ–∫—Å - —ç—Ç–æ –Ω–∞–±–æ—Ä —Ç–≤–æ–∏—Ö –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, –ø—Ä–∞–≤–∏–ª –∏ —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π.
              –≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç —Ç–≤–æ–µ–π –ª–∏—á–Ω–æ—Å—Ç–∏, –∫–æ–º–ø–∞—Å –≤ —Å–ª–æ–∂–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö.
              <br><br>
              –ó–∞–ø–∏—à–∏ –∑–¥–µ—Å—å –ø—Ä–∞–≤–∏–ª–∞, –ø–æ –∫–æ—Ç–æ—Ä—ã–º —Ç—ã –∂–∏–≤–µ—à—å –∏–ª–∏ —Ö–æ—á–µ—à—å –∂–∏—Ç—å.
              –≠—Ç–æ —Ç–≤–æ–π –ª–∏—á–Ω—ã–π –º–æ—Ä–∞–ª—å–Ω—ã–π –∫–æ–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–µ—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è.
            </div>

            <div style="margin-top: 24px; padding-top: 20px; border-top: 1px solid #00ff0040;">
              <div style="color: #00ff00cc; margin-bottom: 12px; font-size: 11px; letter-spacing: 1px;">
                [FEATURES] –í–û–ó–ú–û–ñ–ù–û–°–¢–ò
              </div>
              <div style="color: #00ff0099; font-size: 12px;">
                <div style="margin-bottom: 8px;">
                  <span style="color: #00ff00;">üëÅÔ∏è –†–ï–ñ–ò–ú –ß–¢–ï–ù–ò–Ø</span> - –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å: –±–æ–ª—å—à–µ —à—Ä–∏—Ñ—Ç, –≤—ã—à–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç, –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
                </div>
                <div style="margin-bottom: 8px;">
                  <span style="color: #00ff00;">üìñ PREVIEW</span> - –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Markdown
                </div>
                <div style="margin-top: 16px; padding: 12px; background: rgba(0, 255, 0, 0.05); border-left: 3px solid #00ff00;">
                  <strong style="color: #00ff00;">–ü–û–î–î–ï–†–ñ–ö–ê MARKDOWN:</strong><br>
                  <code style="color: #00ff00aa; font-size: 11px;">
                    # –ó–∞–≥–æ–ª–æ–≤–æ–∫<br>
                    ## –ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫<br>
                    **–∂–∏—Ä–Ω—ã–π** *–∫—É—Ä—Å–∏–≤*<br>
                    - –°–ø–∏—Å–æ–∫<br>
                    &gt; –¶–∏—Ç–∞—Ç–∞<br>
                    [—Å—Å—ã–ª–∫–∞](url)
                  </code>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ========== PERKS SECTION ========== -->
  <section id="perks" class="section" style="display:none;">
    <div class="card">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
        <h2>[PERK_TREE] –î–ï–†–ï–í–û –ü–ï–†–ö–û–í</h2>
        <div style="text-align: right;">
          <div style="font-size: 12px; color: var(--nexus-text-dim); margin-bottom: 4px;">
            –†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–ù–û –ü–ï–†–ö–û–í
          </div>
          <div style="font-size: 24px; color: var(--nexus-green); font-weight: 700;" id="perk-counter">
            0 / 16
          </div>
        </div>
      </div>

      <!-- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–µ—Ä–∫–∏ -->
      <div style="background: var(--nexus-black); border: 2px solid var(--nexus-amber); border-radius: var(--radius); padding: 24px; margin-bottom: 32px;">
        <h3 style="color: var(--nexus-amber); margin-bottom: 16px; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 24px;">üìñ</span>
          –ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢ –°–ò–°–¢–ï–ú–ê –ü–ï–†–ö–û–í
        </h3>

        <div style="display: grid; gap: 16px; font-size: 13px; line-height: 1.8;">
          <div style="padding: 12px; background: var(--nexus-surface); border-radius: var(--radius-sm); border-left: 3px solid var(--nexus-green);">
            <strong style="color: var(--nexus-green);">–®–ê–ì 1: –ö–ê–ß–ê–ô –°–¢–ê–¢–´</strong><br>
            <span style="color: var(--nexus-text-dim);">
              –í—ã–ø–æ–ª–Ω—è–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å XP –∏ –ø–æ–≤—ã—à–∞—Ç—å —É—Ä–æ–≤–µ–Ω—å —Å—Ç–∞—Ç–æ–≤:<br>
              ‚Ä¢ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Üí +10 XP –∫ <strong>–°–ò–õ–ï (STR)</strong> –∏ <strong>–õ–û–í–ö–û–°–¢–ò (PER)</strong><br>
              ‚Ä¢ –ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚Üí +15 XP –∫ <strong>–í–û–õ–ï (WIL)</strong><br>
              ‚Ä¢ –ö–æ–¥–∏–Ω–≥ ‚Üí +20 XP –∫ <strong>–ò–ù–¢–ï–õ–õ–ï–ö–¢–£ (INT)</strong><br>
              ‚Ä¢ –¢–µ—Å—Ç—ã ‚Üí +10 XP –∫ <strong>–í–û–õ–ï (WIL)</strong>
            </span>
          </div>

          <div style="padding: 12px; background: var(--nexus-surface); border-radius: var(--radius-sm); border-left: 3px solid var(--nexus-amber);">
            <strong style="color: var(--nexus-amber);">–®–ê–ì 2: –°–õ–ï–î–ò –ó–ê –¢–†–ï–ë–û–í–ê–ù–ò–Ø–ú–ò</strong><br>
            <span style="color: var(--nexus-text-dim);">
              –£ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–∫–∞ –µ—Å—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å—Ç–∞—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä: STR 5+, INT 7+).<br>
              –ö–æ–≥–¥–∞ —Ç–≤–æ–∏ —Å—Ç–∞—Ç—ã –¥–æ—Å—Ç–∏–≥–Ω—É—Ç –Ω—É–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø–µ—Ä–∫ —Å—Ç–∞–Ω–µ—Ç <strong style="color: var(--nexus-green);">–î–û–°–¢–£–ü–ï–ù üü¢</strong>
            </span>
          </div>

          <div style="padding: 12px; background: var(--nexus-surface); border-radius: var(--radius-sm); border-left: 3px solid var(--nexus-green);">
            <strong style="color: var(--nexus-green);">–®–ê–ì 3: –†–ê–ó–ë–õ–û–ö–ò–†–£–ô –ü–ï–†–ö</strong><br>
            <span style="color: var(--nexus-text-dim);">
              –ö–æ–≥–¥–∞ –ø–µ—Ä–∫ –¥–æ—Å—Ç—É–ø–µ–Ω, –Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É <strong>"–†–ê–ó–ë–õ–û–ö–ò–†–û–í–ê–¢–¨"</strong>.<br>
              –ü–µ—Ä–∫ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –Ω–∞–≤—Å–µ–≥–¥–∞ –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç –¥–∞–≤–∞—Ç—å –±–æ–Ω—É—Å—ã!
            </span>
          </div>

          <div style="padding: 12px; background: var(--nexus-surface); border-radius: var(--radius-sm); border-left: 3px solid #00ffff);">
            <strong style="color: #00ffff;">–ë–û–ù–£–°–´ –ü–ï–†–ö–û–í:</strong><br>
            <span style="color: var(--nexus-text-dim);">
              ‚Ä¢ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ XP –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (+50% –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞–º, +50% –∫ –∫–æ–¥—É)<br>
              ‚Ä¢ –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π (—è–∑—ã–∫–∏, —á–∏—Ç–∞—Ç–µ–ª—å—Å–∫–∏–π –¥–Ω–µ–≤–Ω–∏–∫)<br>
              ‚Ä¢ –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–≤—ã–Ω–æ—Å–ª–∏–≤–æ—Å—Ç—å, —Ñ–æ–∫—É—Å, –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞)
            </span>
          </div>
        </div>

        <div style="margin-top: 16px; padding: 12px; background: var(--nexus-black); border: 1px solid var(--nexus-border); border-radius: var(--radius-sm); font-size: 12px; text-align: center; color: var(--nexus-green);">
          üí° <strong>–°–û–í–ï–¢:</strong> –°–º–æ—Ç—Ä–∏ —Ç–µ–∫—É—â–∏–µ —É—Ä–æ–≤–Ω–∏ —Å–≤–æ–∏—Ö —Å—Ç–∞—Ç–æ–≤ –≤ –¥–∞—à–±–æ—Ä–¥–µ (–≤–∏–¥–∂–µ—Ç "–°–¢–ê–¢–´ –ü–ï–†–°–û–ù–ê–ñ–ê")
        </div>
      </div>

      <!-- Physical Perks -->
      <div style="margin-bottom: 40px;">
        <h3 style="color: var(--nexus-green); margin-bottom: 20px; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 24px;">üí™</span>
          [PHYSICAL] –§–ò–ó–ò–ß–ï–°–ö–ò–ï –ü–ï–†–ö–ò
        </h3>
        <div id="perks-physical" class="perks-container"></div>
      </div>

      <!-- Mental Perks -->
      <div style="margin-bottom: 40px;">
        <h3 style="color: var(--nexus-green); margin-bottom: 20px; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 24px;">üß†</span>
          [MENTAL] –ú–ï–ù–¢–ê–õ–¨–ù–´–ï –ü–ï–†–ö–ò
        </h3>
        <div id="perks-mental" class="perks-container"></div>
      </div>

      <!-- Spiritual Perks -->
      <div style="margin-bottom: 40px;">
        <h3 style="color: var(--nexus-green); margin-bottom: 20px; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 24px;">üßò</span>
          [SPIRITUAL] –î–£–•–û–í–ù–´–ï –ü–ï–†–ö–ò
        </h3>
        <div id="perks-spiritual" class="perks-container"></div>
      </div>

      <!-- Hybrid Perks -->
      <div style="margin-bottom: 40px;">
        <h3 style="color: var(--nexus-green); margin-bottom: 20px; display: flex; align-items: center; gap: 12px;">
          <span style="font-size: 24px;">‚öîÔ∏è</span>
          [HYBRID] –ì–ò–ë–†–ò–î–ù–´–ï –ü–ï–†–ö–ò
        </h3>
        <div id="perks-hybrid" class="perks-container"></div>
      </div>

      <!-- Legend -->
      <div style="margin-top: 40px; padding: 24px; background: var(--nexus-surface); border-radius: var(--radius-sm); border: 2px solid var(--nexus-green);">
        <h4 style="color: var(--nexus-green); margin-bottom: 16px; display: flex; align-items: center; gap: 8px;">
          <span style="font-size: 20px;">‚ÑπÔ∏è</span>
          –°–¢–ê–¢–£–°–´ –ü–ï–†–ö–û–í
        </h4>
        <div style="display: grid; gap: 12px; font-size: 13px;">
          <div style="padding: 10px; background: var(--nexus-black); border-radius: var(--radius-sm); border-left: 3px solid var(--nexus-green);">
            <span style="color: var(--nexus-green); font-weight: 700;">üü¢ –î–û–°–¢–£–ü–ï–ù</span><br>
            <span style="color: var(--nexus-text-dim); font-size: 11px;">
              –¢–≤–æ–∏ —Å—Ç–∞—Ç—ã –¥–æ—Å—Ç–∏–≥–ª–∏ –Ω—É–∂–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. –ú–æ–∂–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–∫ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!
            </span>
          </div>
          <div style="padding: 10px; background: var(--nexus-black); border-radius: var(--nexus-sm); border-left: 3px solid var(--nexus-text-dim);">
            <span style="color: var(--nexus-text-dim); font-weight: 700;">‚ö™ –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù</span><br>
            <span style="color: var(--nexus-text-dim); font-size: 11px;">
              –ù–µ —Ö–≤–∞—Ç–∞–µ—Ç —É—Ä–æ–≤–Ω—è —Å—Ç–∞—Ç–æ–≤. –ü—Ä–æ–¥–æ–ª–∂–∞–π –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —á—Ç–æ–±—ã –∫–∞—á–∞—Ç—å —Å—Ç–∞—Ç—ã.
            </span>
          </div>
          <div style="padding: 10px; background: var(--nexus-black); border-radius: var(--radius-sm); border-left: 3px solid var(--nexus-amber);">
            <span style="color: var(--nexus-amber); font-weight: 700;">‚úì –ê–ö–¢–ò–í–ï–ù</span><br>
            <span style="color: var(--nexus-text-dim); font-size: 11px;">
              –ü–µ—Ä–∫ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω! –ë–æ–Ω—É—Å—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ –≤—Å–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º.
            </span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Mode Switching Modal -->
  <div id="mode-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content mode-modal">
      <div class="modal-header">
        <h3>–í–´–ë–û–† –†–ï–ñ–ò–ú–ê</h3>
        <button onclick="closeModeModal()" class="modal-close">√ó</button>
      </div>
      <div class="modal-body">
        <p style="margin-bottom: 20px; color: var(--nexus-text-dim); font-size: 13px;">
          –†–µ–∂–∏–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –Ω–∞–±–æ—Ä –∑–∞–¥–∞—á –Ω–∞ –¥–µ–Ω—å. –í—ã–±–µ—Ä–∏ –∏—Å—Ö–æ–¥—è –∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
        </p>

        <div class="mode-options">
          <!-- NORM -->
          <div class="mode-option" data-mode="norm" onclick="selectMode('norm')">
            <div class="mode-option-header">
              <span class="mode-option-icon" style="color: var(--nexus-green);">‚ñì‚ñì‚ñì</span>
              <span class="mode-option-name">–ù–û–†–ú–ê</span>
            </div>
            <p class="mode-option-desc">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî –∂–∏—Ç—å "–∫–∞–∫ –Ω–∞–¥–æ"</p>
            <ul class="mode-option-tasks">
              <li>–°–æ–Ω ~7+ —á–∞—Å–æ–≤</li>
              <li>3 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –≤ –Ω–µ–¥–µ–ª—é</li>
              <li>1 —à–∞–≥ –∫ –≤–∞–∂–Ω–æ–º—É –∫–∞–∂–¥—ã–π –¥–µ–Ω—å</li>
              <li>3-5 –ø–æ–ø—ã—Ç–æ–∫ –≤ –Ω–µ–¥–µ–ª—é</li>
            </ul>
          </div>

          <!-- MINIMUM -->
          <div class="mode-option" data-mode="minimum" onclick="selectMode('minimum')">
            <div class="mode-option-header">
              <span class="mode-option-icon" style="color: var(--nexus-amber);">‚ñë‚ñë‚ñë</span>
              <span class="mode-option-name">–ú–ò–ù–ò–ú–£–ú</span>
            </div>
            <p class="mode-option-desc">–†–µ–∂–∏–º –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è ‚Äî —Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤–æ–µ</p>
            <ul class="mode-option-tasks">
              <li>–°–æ–Ω/–µ–¥–∞/–≥–∏–≥–∏–µ–Ω–∞ ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</li>
              <li>10-20 –º–∏–Ω –ø—Ä–æ–≥—É–ª–∫–∏</li>
              <li>–ú–∞–ª–µ–Ω—å–∫–∏–π —à–∞–≥ 10-20 –º–∏–Ω</li>
            </ul>
          </div>

          <!-- CRISIS -->
          <div class="mode-option" data-mode="crisis" onclick="selectMode('crisis')">
            <div class="mode-option-header">
              <span class="mode-option-icon" style="color: #ff4444;">‚ñí‚ñí‚ñí</span>
              <span class="mode-option-name">–ö–†–ò–ó–ò–°</span>
            </div>
            <p class="mode-option-desc">–≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî —Å–æ–Ω, –µ–¥–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞</p>
            <ul class="mode-option-tasks">
              <li>–°–æ–Ω –∏ –µ–¥–∞</li>
              <li>–°–∫–∞–∑–∞—Ç—å –∫–æ–º—É-—Ç–æ: "–º–Ω–µ –ø–ª–æ—Ö–æ"</li>
              <li>15 –º–∏–Ω –ø—Ä–æ—Å—Ç–æ–≥–æ –¥–µ–ª–∞</li>
            </ul>
          </div>
        </div>

        <!-- Mode History Preview -->
        <div class="mode-history-preview" style="margin-top: 24px;">
          <h4 style="font-size: 12px; color: var(--nexus-green-dim); margin-bottom: 12px;">–ü–û–°–õ–ï–î–ù–ò–ï 7 –î–ù–ï–ô</h4>
          <div id="mode-history-days" class="mode-history-days">
            <!-- Filled by JS -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Welcome Back Modal -->
  <div id="welcome-back-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content welcome-modal">
      <div class="modal-header">
        <h3>–° –í–û–ó–í–†–ê–©–ï–ù–ò–ï–ú</h3>
      </div>
      <div class="modal-body" style="text-align: center;">
        <p id="welcome-back-message" style="margin-bottom: 20px; font-size: 15px;">
          –ü—Ä–æ—à–ª–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π —Å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–∏–∑–∏—Ç–∞.
        </p>
        <p style="margin-bottom: 24px; color: var(--nexus-text-dim); font-size: 13px;">
          –í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ. –ñ–∏–∑–Ω—å –±—ã–≤–∞–µ—Ç —Ç—è–∂—ë–ª–æ–π.<br>
          –ö–∞–∫–æ–π —Ä–µ–∂–∏–º –ø–æ–¥—Ö–æ–¥–∏—Ç —Å–µ–π—á–∞—Å?
        </p>
        <div class="welcome-mode-buttons">
          <button onclick="selectModeAndClose('norm')" class="btn-mode btn-mode-norm">–ù–û–†–ú–ê</button>
          <button onclick="selectModeAndClose('minimum')" class="btn-mode btn-mode-minimum">–ú–ò–ù–ò–ú–£–ú</button>
          <button onclick="selectModeAndClose('crisis')" class="btn-mode btn-mode-crisis">–ö–†–ò–ó–ò–°</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/storage.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/game-state.js"></script>
  <script src="js/migration.js"></script>
  <script src="js/stats.js"></script>
  <script src="js/personal-code.js"></script>
  <script src="js/phq15.js"></script>
  <script src="js/weight.js"></script>
  <script src="js/codex.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
